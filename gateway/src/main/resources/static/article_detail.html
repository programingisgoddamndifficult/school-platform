<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Article Detail</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      font-size: 2em;
      max-width: 70%;
      margin: 0 auto 10px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      cursor: pointer;
    }

    h1:hover {
      white-space: normal;
      overflow: visible;
    }

    #author-info {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 20px;
    }

    #author-avatar {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #ccc;
      margin-right: 10px;
    }

    #article-content {
      text-align: center;
      margin-bottom: 20px;
      max-width: 70%;
      margin-left: auto;
      margin-right: auto;
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 10;
      -webkit-box-orient: vertical;
    }

    #article-stats {
      position: absolute;
      left: 20px;
      top: 150px;
      text-align: left;
      border-right: 1px dashed #ccc;
      padding-right: 20px;
    }

    #create-time {
      text-align: right;
      font-size: 0.8em;
      width: 70%;
    }

    .stat-item {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .stat-icon {
      margin-right: 5px;
    }
  </style>
</head>

<body>
<h1 id="article-title"></h1>
<div id="author-info">
  <div id="author-avatar"></div>
  <span id="author-name"></span>
</div>
<div id="article-content"></div>
<div id="article-stats">
  <div class="stat-item">
    <span class="stat-icon">‚ù§Ô∏è</span>
    <span id="likes-num"></span>
  </div>
  <div class="stat-item">
    <span class="stat-icon">üëÅÔ∏è</span>
    <span id="read-num"></span>
  </div>
  <div class="stat-item">
    <span class="stat-icon">‚≠ê</span>
    <span id="collect-num"></span>
  </div>
</div>
<div id="create-time"></div>

<script>
  // ‰ªé URL ‰∏≠Ëé∑ÂèñÂèÇÊï∞
  const urlParams = new URLSearchParams(window.location.search);
  const articleId = urlParams.get('articleId');
  const authorization = urlParams.get('authorization');

  if (!articleId || !authorization) {
    alert('Áº∫Â∞ëÂøÖË¶ÅÂèÇÊï∞ÔºåËØ∑ÈáçÊñ∞ËÆøÈóÆ„ÄÇ');
    window.location.href = 'index.html';
  } else {
    // ÂèëËµ∑ËØ∑Ê±ÇËé∑ÂèñÊñáÁ´†ËØ¶ÊÉÖ
    fetch(`http://127.0.0.1/api/user/article/detail?articleId=${articleId}`, {
      method: 'GET',
      headers: {
        'Authorization': `${authorization}`,
        'User-Agent': 'Apifox/1.0.0 (https://apifox.com)'
      }
    })
            .then(response => {
              if (!response.ok) {
                throw new Error('Network response was not ok');
              }
              return response.json();
            })
            .then(data => {
              if (data.code === '200') {
                const articleData = data.data;
                document.getElementById('article-title').textContent = articleData.title;
                document.getElementById('author-name').textContent = articleData.userInfo.username;
                document.getElementById('article-content').textContent = articleData.content;
                document.getElementById('likes-num').textContent = articleData.likesNum;
                document.getElementById('read-num').textContent = articleData.readNum;
                document.getElementById('collect-num').textContent = articleData.collectNum;
                document.getElementById('create-time').textContent = articleData.createTime;
              }
            })
            .catch(error => {
              const errorMessage = `ÂèëÁîüÈîôËØØ: ${error.message}`;
              alert(errorMessage);
            });
  }
</script>
</body>

</html>